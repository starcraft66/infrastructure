apiVersion: v1
kind: Service
metadata:
  name: traefik-v4-udp
  annotations:
    metallb.universe.tf/allow-shared-ip: "traefik-v4"
spec:
  ipFamilyPolicy: SingleStack
  ipFamilies:
    - IPv4
  loadBalancerIP: "10.224.0.3"
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
  - name: https
    port: 443
    targetPort: websecureudp
    protocol: UDP
  selector:
    app.kubernetes.io/name: traefik
---
apiVersion: v1
kind: Service
metadata:
  name: traefik-v6-udp
  annotations:
    metallb.universe.tf/allow-shared-ip: "traefik-v6"
spec:
  ipFamilyPolicy: SingleStack
  ipFamilies:
    - IPv6
  loadBalancerIP: "2607:fa48:6ed8:8a54:3::1"
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
  - name: https
    port: 443
    targetPort: websecureudp
    protocol: UDP
  selector:
    app.kubernetes.io/name: traefik
---
apiVersion: v1
kind: Service
metadata:
  name: traefik-v4
  annotations:
    metallb.universe.tf/allow-shared-ip: "traefik-v4"
spec:
  ipFamilyPolicy: SingleStack
  ipFamilies:
    - IPv4
  loadBalancerIP: "10.224.0.3"
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
  - name: http
    port: 80
    targetPort: web
    protocol: TCP
  - name: https
    port: 443
    targetPort: websecure
    protocol: TCP
  selector:
    app.kubernetes.io/name: traefik
---
apiVersion: v1
kind: Service
metadata:
  name: traefik-v6
  annotations:
    metallb.universe.tf/allow-shared-ip: "traefik-v6"
spec:
  ipFamilyPolicy: SingleStack
  ipFamilies:
    - IPv6
  loadBalancerIP: "2607:fa48:6ed8:8a54:3::1"
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
  - name: http
    port: 80
    targetPort: web
    protocol: TCP
  - name: https
    port: 443
    targetPort: websecure
    protocol: TCP
  selector:
    app.kubernetes.io/name: traefik
