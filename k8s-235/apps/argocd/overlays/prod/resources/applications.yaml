# In this file, all applications running in
# our production cluster are listed. Simply add
# a new 'Application' resource to this list to
# sync them with Git.
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: argocd
  namespace: argocd
spec:
  project: production
  destination:
    namespace: argocd
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/argocd/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: monitoring
  namespace: argocd
spec:
  project: production
  destination:
    namespace: monitoring
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/monitoring/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: cert-manager
  namespace: argocd
spec:
  project: production
  destination:
    namespace: cert-manager
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/cert-manager/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: traefik
  namespace: argocd
spec:
  project: production
  destination:
    namespace: traefik
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/traefik/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: democratic-csi
  namespace: argocd
spec:
  project: production
  destination:
    namespace: democratic-csi
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/democratic-csi/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: elk-nhackindustries
  namespace: argocd
spec:
  project: production
  destination:
    namespace: nhackindustries
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/elk-nhackindustries/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: guacamole
  namespace: argocd
  annotations:
    argocd-image-updater.argoproj.io/image-list: "guacamole=guacamole/guacamole,guacd=guacamole/guacd"
    argocd-image-updater.argoproj.io/guacamole.update-strategy: name
    argocd-image-updater.argoproj.io/guacamole.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/guacd.update-strategy: name
    argocd-image-updater.argoproj.io/guacd.allow-tags: "regexp:^latest$"
spec:
  project: production
  destination:
    namespace: guacamole
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/guacamole/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: jenkins
  namespace: argocd
spec:
  project: production
  destination:
    namespace: default
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/jenkins
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: kubedb
  namespace: argocd
spec:
  project: production
  destination:
    namespace: kubedb
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/kubedb/overlays/prod
  syncPolicy:
    automated:
      selfHeal: false
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: mediaserver
  namespace: argocd
  annotations:
    argocd-image-updater.argoproj.io/image-list: "kube-plex=quay.io/munnerz/kube-plex,plex=plexinc/pms-docker,jackett=linuxserver/jackett,radarr=linuxserver/radarr,sonarr=linuxserver/sonarr,qbittorrent=linuxserver/qbittorrent,tautulli=linuxserver/tautulli"
    argocd-image-updater.argoproj.io/kube-plex.update-strategy: name
    argocd-image-updater.argoproj.io/kube-plex.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/plex.update-strategy: name
    argocd-image-updater.argoproj.io/plex.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/jackett.update-strategy: name
    argocd-image-updater.argoproj.io/jackett.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/radarr.update-strategy: name
    argocd-image-updater.argoproj.io/radarr.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/sonarr.update-strategy: name
    argocd-image-updater.argoproj.io/sonarr.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/qbittorrent.update-strategy: name
    argocd-image-updater.argoproj.io/qbittorrent.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/tautulli.update-strategy: name
    argocd-image-updater.argoproj.io/tautulli.allow-tags: "regexp:^latest$"
spec:
  project: production
  destination:
    namespace: mediaserver
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/mediaserver/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: nextcloud
  namespace: argocd
spec:
  project: production
  destination:
    namespace: nextcloud
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/nextcloud/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: pomf
  namespace: argocd
spec:
  project: production
  destination:
    namespace: pomf
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/pomf/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: unifi-controller
  namespace: argocd
  annotations:
    argocd-image-updater.argoproj.io/image-list: "unifi-controller=linuxserver/unifi-controller,unifi-poller=golift/unifi-poller"
    argocd-image-updater.argoproj.io/unifi-controller.update-strategy: name
    argocd-image-updater.argoproj.io/unifi-controller.allow-tags: "regexp:^latest$"
    argocd-image-updater.argoproj.io/unifi-poller.update-strategy: name
    argocd-image-updater.argoproj.io/unifi-poller.allow-tags: "regexp:^latest$"
spec:
  project: production
  destination:
    namespace: unifi
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/unifi-controller/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: streetmerchant
  namespace: argocd
  annotations:
    argocd-image-updater.argoproj.io/image-list: "streetmerchant=ghcr.io/jef/streetmerchant"
    argocd-image-updater.argoproj.io/streetmerchant.update-strategy: name
    argocd-image-updater.argoproj.io/streetmerchant.allow-tags: "regexp:^nightly$"
spec:
  project: production
  destination:
    namespace: streetmerchant
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/streetmerchant/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: minecraft-cacaffichage
  namespace: argocd
spec:
  project: production
  destination:
    namespace: cacaffichage
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/minecraft/cacaffichage/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: metallb
  namespace: argocd
spec:
  project: production
  destination:
    namespace: metallb-system
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/metallb/overlays/prod
  syncPolicy:
    automated:
      selfHeal: false
---
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: renovate
  namespace: argocd
spec:
  project: production
  destination:
    namespace: renovate
    server: https://kubernetes.default.svc
  source:
    repoURL: https://git.tdude.co/tristan/infrastructure.git
    targetRevision: master
    path: k8s-235/apps/renovate/overlays/prod
  syncPolicy:
    automated:
      selfHeal: true