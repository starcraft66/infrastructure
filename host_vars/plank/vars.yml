---
login_banner: "
  \ \ +----+        _             _\n
  \ /    /|  _ __ | | __ _ _ __ | | __\n
  +----+ | | '_ \\| |/ _` | '_ \\| |/ /\n
  |    | + | |_) | | (_| | | | |   < \n
  | 5  |/  | .__/|_|\\__,_|_| |_|_|\\_\\\n
  +----+   |_| plank.tdude.co\n"


ufw_applications:
  - { name: "OpenSSH" }   
ufw_rules:
  - { port: 22, to_ip: '62.210.251.78', rule: allow, comment: 'Allow SSH v4' }
  - { port: 22, to_ip: '2001:bc8:2517::/64', rule: allow, comment: 'Allow SSH v6' }
  - { port: 80, to_ip: '62.210.251.78', rule: allow, comment: 'Allow HTTP v4' }
  - { port: 80, to_ip: '2001:bc8:2517::/64', rule: allow, comment: 'Allow HTTP v6' }
  - { port: 443, to_ip: '62.210.251.78', rule: allow, comment: 'Allow HTTPS v4' }
  - { port: 443, to_ip: '2001:bc8:2517::/64', rule: allow, comment: 'Allow HTTPS v6' }
  - { port: 51820, to_ip: '62.210.251.78', rule: allow, comment: 'Allow WireGuard v4' }
  - { port: 51820, to_ip: '2001:bc8:2517::/64', rule: allow, comment: 'Allow WireGuard v6' }
  - { port: 34200, to_ip: '62.210.251.78', proto: tcp, rule: allow, comment: 'Allow Plex' }
  - { port: 3005, to_ip: '62.210.251.78', proto: tcp, rule: allow, comment: 'Allow Plex' }
  - { port: 8324, to_ip: '62.210.251.78', proto: tcp, rule: allow, comment: 'Allow Plex' }
  - { port: 32469, to_ip: '62.210.251.78', proto: tcp, rule: allow, comment: 'Allow Plex' }
  - { port: 1900, to_ip: '62.210.251.78', proto: udp, rule: allow, comment: 'Allow Plex' }
  - { port: 32410, to_ip: '62.210.251.78', proto: udp, rule: allow, comment: 'Allow Plex' }
  - { port: 32412, to_ip: '62.210.251.78', proto: udp, rule: allow, comment: 'Allow Plex' }
  - { port: 32413, to_ip: '62.210.251.78', proto: udp, rule: allow, comment: 'Allow Plex' }
  - { port: 32414, to_ip: '62.210.251.78', proto: udp, rule: allow, comment: 'Allow Plex' }
#  - { from_ip: '2001:bc8:2517:1000::/56', to_ip: '::/0', direction: 'routed', comment: 'Allow Wireguard Routing' }
  - { from_ip: '2001:bc8:2517:1000::/56', route: 'yes', interface: 'wg0', direction: 'in', comment: 'Allow Wireguard Peers IPv6 outbound' }
  - { from_ip: '2001:bc8:2517:1000::/56', route: 'yes', interface: 'eno1', direction: 'out', comment: 'Allow Wireguard Peers IPv6 outbound' }
  - { to_ip: '2001:bc8:2517:1000::/56', route: 'yes', interface: 'wg0', direction: 'out', comment: 'Allow Wireguard Peers IPv6 inbound' }
  - { to_ip: '2001:bc8:2517:1000::/56', route: 'yes', interface: 'eno1', direction: 'in', comment: 'Allow Wireguard Peers IPv6 inbound' }
  - { from_ip: '127.0.0.1/8', comment: 'Allow localhost v4' }
  - { from_ip: '::1/128', comment: 'Allow localhost v6' }
  - { from_ip: '172.16.0.0/12', comment: 'Allow RFC1918' }
  - { from_ip: '192.168.0.0/16', comment: 'Allow RFC1918' }
      
ufw_ipv6: "yes"
ufw_default_input_policy: DROP
ufw_default_output_policy: ACCEPT
ufw_default_forward_policy: ACCEPT
ufw_default_application_policy: SKIP
ufw_state: enabled
ufw_logging: "on"
ufw_reset: yes

mediaserver_installation_server: "/opt/mediaserver"
plex_media_folder: "/opt/mediaserver/media"
deluge_config_folder: "/opt/mediaserver/deluge"
jackett_config_folder: "/opt/mediaserver/jackett"
sonarr_config_folder: "/opt/mediaserver/sonarr"
radarr_config_folder: "/opt/mediaserver/radarr"
plex_config_folder: "/opt/mediaserver/plex"
plex_transcode_folder: "/opt/mediaserver/plex_transcode"

dehydrated_accept_letsencrypt_terms: yes
dehydrated_challengetype: dns-01
dehydrated_contactemail: starcraft66@gmail.com
dehydrated_domains: |
  plank.tdude.co
  status.tdude.co
  git.tdude.co
dehydrated_deploycert: |
  systemctl reload nginx

plex_claim_token: "{{ vault_plex_claim_token }}"
sonarr_api_key: "{{ vault_sonarr_api_key }}"
radarr_api_key: "{{ vault_radarr_api_key }}"
jackett_api_key: "{{ vault_jackett_api_key }}"
jackett_admin_password: "{{ vault_jackett_admin_password }}"

wireguard:
  wg0:
    addresses:
      - "10.255.239.1/24"
      - "2001:bc8:2517:f::1/64"
    post-up: "iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eno1 -j MASQUERADE;"
    post-down: "iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eno1 -j MASQUERADE;"
    port: 51820
    private_key: "{{ vault_wireguard_keys['wg0'] }}"
    peers:
      - public_key: "lJoAVNs9uHu9vNOws12ZmEXIOSTYx5HlsEB/x+L3iV8="
        allowed_ips:
          - "10.255.239.2/32"
          - "2001:bc8:2517:1000::1/64"

statusfy_installation_folder: "/opt/statusfy"
statusfy_data_folder: "/opt/statusfy/data"
statusfy_webserver_port: 2992
statusfy_docker_version: "unstable"

gitlab_installation_folder: "/opt/gitlab"
gitlab_config_folder: "/opt/gitlab/config"
gitlab_logs_folder: "/opt/gitlab/logs"
gitlab_data_folder: "/opt/gitlab/data"
gitlab_runner_config_folder: "/opt/gitlab-runner/config"
gitlab_smtp_server: "smtp.tdude.co"
gitlab_smtp_port: 587
gitlab_email_from: "git@tdude.co"
gitlab_email_reply_to: "noreply@tdude.co"
gitlab_webserver_port: 5000
gitlab_ssh_port: 5001
gitlab_external_url: "https://git.tdude.co"
gitlab_hostname: "git.tdude.co"

traefik_installation_folder: "/opt/traefik"
traefik_data_folder: "/opt/traefik/data"
traefik_docker_version: "latest"

monitoring_installation_folder: "/opt/monitoring"
prometheus_installation_folder: "/opt/monitoring/prometheus"
prometheus_data_folder: "/opt/monitoring/prometheus/data"
prometheus_config_folder: "/opt/monitoring/prometheus/config"
prometheus_docker_version: "latest"
grafana_installation_folder: "/opt/monitoring/grafana"
grafana_data_folder: "/opt/monitoring/grafana/data"
grafana_docker_version: "latest"
cadvisor_docker_version: "latest"
cadvisor_redis_docker_version: "latest"

traefik_oauth2_client_id: "{{ vault_traefik_oauth2_client_id }}"
traefik_oauth2_client_secret: "{{ vault_traefik_oauth2_client_secret }}"
traefik_oauth2_secret: "{{ vault_traefik_oauth2_secret }}"