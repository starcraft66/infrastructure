# https://github.com/Koenkk/zigbee2mqtt/issues/25385#issuecomment-2569870293
securityContext:
  container:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    capabilities:
      drop: ["ALL"]
      add: ["NET_BIND_SERVICE"]
workload:
  main:
    podSpec:
      initContainers:
        init-config:
          env:
            USE_CUSTOM_CONFIG_FILE: false
            # This values are required for the autogenerated file to work.
            ZIGBEE2MQTT_CONFIG_PERMIT_JOIN: false
            ZIGBEE2MQTT_CONFIG_MQTT_SERVER: "mqtt://mosquitto"
            ZIGBEE2MQTT_CONFIG_MQTT_BASE_TOPIC: "zigbee2mqtt"
            ZIGBEE2MQTT_CONFIG_SERIAL_ADAPTER: "deconz"
      containers:
        main:
          resources:
            requests:
              squat.ai/zigbee: 1
            limits:
              squat.ai/zigbee: 1
          env:
            USE_CUSTOM_CONFIG_FILE: false
            # This values are required for the autogenerated file to work.
            ZIGBEE2MQTT_CONFIG_PERMIT_JOIN: false
            ZIGBEE2MQTT_CONFIG_MQTT_SERVER: "mqtt://mosquitto"
            ZIGBEE2MQTT_CONFIG_MQTT_BASE_TOPIC: "zigbee2mqtt"
            ZIGBEE2MQTT_CONFIG_SERIAL_ADAPTER: "deconz"